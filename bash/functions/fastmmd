# fastmmd - render a Mermaid diagram from stdin to stdout, or chafa if stdout is a terminal

: "${FASTMMD_PROGRAM:=chafa}"

fastmmd() {  # *:mmdc_args
    local outcmd=(cat)
    [[ -t 1 ]] && outcmd=($FASTMMD_PROGRAM)

    # default to png output, but the user is free to pass in another -eFMT arg to override that
    mmdc -i- -epng -o- "$@" | "${outcmd[@]}" 2>/dev/null
}

# vim: ft=bash
